from flask import Blueprint, jsonify, current_app
from app.utils.mongodb import get_mongo_db
from app.routes.auth_routes import token_required
from app.models.eventos_model import EventosModel as Evento

eventos_bp = Blueprint('eventos', __name__)

@eventos_bp.route('/resetar-eventos', methods=['GET'])
@token_required
def criar_evento(identity: str):
    db = get_mongo_db()
    db.eventos.delete_many({})

    lista_eventos = [
        Evento(4, "ENTRADA EM AREA DE RISCO"),
        Evento(5, 'EVENTO DE MOVIMENTO INDEVIDO EM HORARIO DE PERNOITE COM VIAGEM (DESLOCAMENTO DE "4222" METROS)'),
        Evento(6, "EVENTO DE DESVIO A ROTA (5086824)(CARREGADO)"),
        Evento(8, 'PARADA NAO AUTORIZADA (DESLOCAMENTO DE "24" METROS).'),
        Evento(9, "REINICIO DE VIAGEM."),
        Evento(10, 'EVENTO DE MOVIMENTO INDEVIDO (DESLOCAMENTO DE "3144" METROS)'),
        Evento(11, 'EVENTO DE FIM DE VIAGEM (CARREGADO)NRO.""5335024"""'),
        Evento(13, "PAINEL VIOLADO."),
        Evento(14, "GPS TRAVADO / VIOLADO."),
        Evento(15, "TECLADO VIOLADO."),
        Evento(16, "ANTENA VIOLADA."),
        Evento(25, "BATERIA VIOLADA."),
        Evento(26, "EVENTO DE VIOLACAO DO SENSOR DE PORTAS DE BAU [SENSOR 1]."),
        Evento(28, "ENGATE DESENGATADO/VIOLADO (SENSOR 1)."),
        Evento(29, "PORTA DO CARONEIRO ABERTA/VIOLADA"),
        Evento(30, "PORTA DO MOTORISTA ABERTA/VIOLADA Desc:|"),
        Evento(32, 'VELOCIDADE VIOLADA. (MAX.: "90" | VALOR RECEBIDO: "91").'),
        Evento(34, "HORARIO DE INICIO DE VIAGEM VIOLADO."),
        Evento(35, 'RECEBIMENTO DE MACRO DE INICIO DE VIAGEM - NRO."5333624"'),
        Evento(47, "PERDA DE SINAL DE 30 MINUTOS. (CONFIG: 30 MINUTOS)."),
        Evento(57, "EVENTO DE RETORNO A ROTA (4996439)(CARREGADO)"),
        Evento(59, "EVENTO DE ENTRADA EM RAIO DA ORIGEM (SOMENTE RAIO)"),
        Evento(61, "EVENTO DE SAIDA DO RAIO DA ORIGEM (SOMENTE RAIO)"),
        Evento(64, "EVENTO DE ENTRADA EM RAIO DO DESTINO (SOMENTE RAIO)"),
        Evento(65, "EVENTO DE ENTRADA EM RAIO DO DESTINO (RAIO + MACRO)."),
        Evento(66, "EVENTO DE SAIDA DO RAIO DO DESTINO (SOMENTE RAIO)."),
        Evento(68, "EVENTO DE AVISO DE BLOQUEIO"),
        Evento(69, "EVENTO DE ENTRADA EM RAIO DA ENTREGA (SOMENTE RAIO)"),
        Evento(70, "EVENTO DE ENTRADA EM RAIO DA ENTREGA (RAIO + MACRO)."),
        Evento(71, "EVENTO DE SAIDA DO RAIO DA ENTREGA (SOMENTE RAIO)."),
        Evento(74, "EVENTO DE ENTRADA EM RAIO DA COLETA (SOMENTE RAIO)"),
        Evento(76, "EVENTO DE SAIDA DO RAIO DA COLETA (SOMENTE RAIO)"),
        Evento(78, "BOTAO DE PANICO"),
        Evento(79, "HORARIO DE FIM DE VIAGEM VIOLADO"),
        Evento(80, "HORARIO DE CHEGADA EM ENTREGA VIOLADO."),
        Evento(81, "HORARIO DE SAIDA DA ENTREGA VIOLADO"),
        Evento(84, "HORARIO DE CHEGADA EM ORIGEM VIOLADO."),
        Evento(85, "HORARIO DE CHEGADA EM DESTINO VIOLADO."),
        Evento(113, "INICIO DE PERNOITE."),
        Evento(118, "SAIDA DE AREA DE RISCO"),
        Evento(119, 'EVENTO DE MOVIMENTO INDEVIDO EM HORARIO DE PERNOITE SEM VIAGEM (DESLOCAMENTO DE "12202" METROS)'),
        Evento(121, 'EVENTO DE EFETIVACAO DE VIAGEM - NRO."5333631"'),
        Evento(123, 'PARADA EM PONTO PROIBIDO DURANTE A VIAGEM (DESLOCAMENTO DE "43" METROS).'),
        Evento(128, "EVENTO DE MACRO DE ENTRADA EM ENTREGA."),
        Evento(134, "EVENTO DE EXCESSO DE TEMPO EM ORIGEM."),
        Evento(135, "EVENTO DE EXCESSO DE TEMPO EM DESTINO."),
        Evento(136, "EVENTO DE EXCESSO DE TEMPO EM ENTREGA."),
        Evento(141, 'EVENTO DE MACRO DE FIM DE VIAGEM - NRO."5331302"'),
        Evento(146, "ENTRADA EM RAIO DE ORIGEM (SEM VIAGEM)."),
        Evento(150, "SAIDA DE RAIO DE ORIGEM (SEM VIAGEM)."),
        Evento(167, "JAMMER DETECTADO"),
        Evento(193, "5º RODA DESENGATADA."),
        Evento(194, "EVENTO DE TRAVA DE BAU DESTRAVADA [SENSOR 1]."),
        Evento(195, "EVENTO DO SENSOR DE PORTAS DE BAU [SENSOR 1]."),
        Evento(198, 'PARADA EM PONTO PERMITIDO DURANTE A VIAGEM (DESLOCAMENTO DE "21" METROS).'),
        Evento(204, 'CHEGADA EM LOCAL "JBS TRP LINS" DA PESSOA "JBS S A - TSP".'),
        Evento(205, 'SAIDA EM LOCAL "FABRICA SEARA UBERABA-MG (3.000M)" da pessoa "SEARA ALIMENTOS LTDA - ITAJAI/SC".'),
        Evento(230, 'PARADA AUTORIZADA (DESLOCAMENTO DE "0" METROS).'),
        Evento(231, "CHEGADA FORCADA"),
        Evento(246, 'Estouro de Senha do Motorista Omnilink'),
        Evento(246, 'Estouro de Senha do Motorista Omnilink'),
        Evento(263, 'EVENTO DE MOVIMENTO INDEVIDO (DESLOCAMENTO DE "2045" METROS)'),
        Evento(265, 'RETORNO DE SINAL'),
        Evento(282, 'PARADA EM LOCAL NAO HOMOLOGADO (EM VIAGEM)'),
        Evento(286, 'PARADA AUTORIZADA COM BLOQUEIO (DESLOCAMENTO DE "0" METROS).'),
        Evento(287, 'PORTA DO MOTORISTA ABERTA'),
        Evento(288, 'PORTA DO CARONEIRO ABERTA'),
        Evento(291, 'EVENTO DE SOLICITACAO DE AUTORIZACAO DE ABERTURA DE PORTAS DE BAU'),
        Evento(305, 'BLOQUEIO VANDALIZADO. (VELOCIDADE CONFIGURADA.: "45" | VELOCIDADE RECEBIDA: "59").'),
        Evento(314, 'RECEBIMENTO DE SENHA DE COACAO DO MOTORISTA DA TECNOLOGIA'),
        Evento(315, 'PARTIDA SUSPEITA DA TECNOLOGIA'),
        Evento(324, 'MACRO DE PARADA INFORMADA - TERMINAL: GKG8D96'),
        Evento(327, 'EVENTO DE TRAVA DE BAU TRAVADA [SENSOR 1].'),
        Evento(329, 'EVENTO DE SAIDA EM RAIO DE ORIGEM (VIAGEM AGENDADA: 5334543).'),
        Evento(330, 'EVENTO DE MACRO DE FIM DE VIAGEM EM DESTINO - NRO."5333014"'),
        Evento(352, 'EVENTO DE ENTRADA EM AREA DE SOMBRA (SOMENTE RAIO)'),
        Evento(353, 'EVENTO DE SAIDA EM AREA DE SOMBRA (SOMENTE RAIO)'),
        Evento(360, 'EVENTO DE ENTRADA EM LOCAL DE PARADA (SOMENTE RAIO)'),
        Evento(361, 'EVENTO DE SAÍDA DE LOCAL DE PARADA (SOMENTE RAIO)'),
        Evento(362, 'EVENTO DE ENTRADA EM MATRIZ (SOMENTE RAIO)'),
        Evento(363, 'EVENTO DE SAÍDA DE MATRIZ (SOMENTE RAIO)'),
        Evento(364, 'EVENTO DE ENTRADA EM FILIAL (SOMENTE RAIO)'),
        Evento(365, 'EVENTO DE SAÍDA DE FILIAL (SOMENTE RAIO)'),
        Evento(378, 'EVENTO DE ENTRADA EM FILIAL (RAIO + MACRO)'),
        Evento(386, 'EVENTO DE ENTRADA EM RAIO DA ORIGEM (SOMENTE RAIO, VIAGEM AGENDADA)'),
        Evento(391, 'PERDA DE SINAL II DE 41 MINUTOS. (CONFIG: 40 MINUTOS).'),
        Evento(393, 'TEMPO FORA DA FAIXA (S01) DE 15 MINUTOS. FAIXA: -6ºC A 2ºC. MAIS ANTIGO FORA: 8ºC.'),
        Evento(396, 'AUSENCIA DE TEMPERATURA DO SENSOR DE TEMPERATURA 01'),
        Evento(399, 'EVENTO DE EXPIRACAO DA PREVISAO DE INICIO DA SM'),
        Evento(400, 'EVENTO DE MACRO DE FIM DE VIAGEM FORA DO DESTINO - NRO."5331302"'),
        Evento(414, 'VEÍCULO EM ANCORAGEM'),
        Evento(415, 'Movimento Indevido Em Ancoragem'),
        Evento(420, 'EVENTO DE VIOLACAO DO SENSOR DE PORTAS DE BAU (2) [SENSOR 1].'),
        Evento(428, 'PORTA DO CARONEIRO VIOLADA'),
        Evento(429, 'PORTA DO MOTORISTA VIOLADA Desc:|'),
        Evento(430, 'ENGATE VIOLADO (SENSOR 1).'),
        Evento(471, 'EVENTO DE SENSOR DE CARACOL LIGADO'),
        Evento(473, 'EVENTO DE SENSOR DE CARACOL FORA DO DESTINO PROGRAMADO'),
        Evento(491, 'EVENTO DE SAIDA DO RAIO DA ORIGEM (SEM EVENTO DE ENTRADA)'),
        Evento(492, 'EVENTO DE SAIDA DO RAIO DA DESTINO (SEM EVENTO DE ENTRADA)'),
        Evento(507, 'EVENTO DE ROTA REVERSA (4258618)(5328295|5000)'),
        Evento(508, 'EVENTO DE RETORNO DE ROTA REVERSA (5086836)(5334274|99999999)')
    ]
    for evento in lista_eventos:
        evento.create_evento()
    return jsonify({'resultado': 'Eventos criados com sucesso!'})